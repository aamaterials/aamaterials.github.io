<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="mofcharts.css">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="mofcharts.js"></script>
  </head>

  <body>
    <div id="title">MOF Data Explorer</div>
    <div id="chartHolder" style="width: 100vw; height: 70vh; position:relative; margin-top:-20px;">
      <div id="chart_div" style="width: 100%; height: 100%;"></div>
    </div>

    <!-- Bubble Size Axis -->
    <div id="sizeAxisLegend" style="width:70%; margin:auto; text-align:center">
        <svg width="100%" height="70px">
          <g>
            <text id="sizeAxisTitle" text-anchor="start" x="14" y="12" font-family="Arial" font-size="14" font-style="italic" stroke-width="0" fill="#000000">Size Axis</text>
            <text id="sizeAxisMinText" text-anchor="end" x="40" y="40" font-family="Arial" font-size="14" stroke="none" stroke-width="0" fill="#000000">10</text>
            <circle id="sizeAxisMinCirc" cx="50" cy="35" r="2" stroke="#cccccc" stroke-width="1" fill-opacity="0.8" fill="#ffb100" />
            <polygon id="sizeAxisTriangle" points="65,35 177,39 177,31" stroke="#cccccc" stroke-width="1" fill-opacity="0.8" fill="#ffb100" />
            <circle id="sizeAxisMaxCirc" cx="190" cy="35" r="7" stroke="#cccccc" stroke-width="1" fill-opacity="0.8" fill="#ffb100" />
            <text id="sizeAxisMaxText" text-anchor="start" x="200" y="40" font-family="Arial" font-size="14" stroke="none" stroke-width="0" fill="#000000">100</text>
          </g>
        </svg>
    </div>

    <!-- Other controls -->
    <div class="w3-row">
      <div class="w3-col m2 l2" style="text-align:center">
          <button class="w3-button w3-border" onclick="openFilterWindow();">Filter Data</button> <br />
          <button class="w3-button w3-border" onclick="window.open(chart.getImageURI());">Grab Image</button>
     </div>


      <div id="controls" class="w3-col m8 l8">
        <div id="pressureBar"  style="font-family:'Arial'; font-size:12pt;">
        <p style="font-style:italic; text-align: left">Pressure, bar: &nbsp;<span id="pressureOverlay"></span></p>
        1 &nbsp; <input id="slider" type="range" min="0" max="1" value="0.5" step="0.002" style="width: calc(100% - 100px);">
        &nbsp; 200
        </div>

        <div class="w3-row">
          <form>
          <div class="w3-col m6 l3">x-axis:
          <select id="xSelect">
            <option value="0">Density</option>
            <option value="1">PLD</option>
            <option value="2">LCD</option>
            <option value="3">VSA</option>
            <option value="4">GSA</option>
            <option value="5">VF</option>
            <option value="6" selected>Uptake (grav.)</option>
            <option value="7">Uptake (vol.)</option>
            <option value="8">Deliverable (grav.)</option>
            <option value="9">Deliverable (vol.)</option>
            <option value="10">QST</option>
          </select></div>
          <div class="w3-col m6 l3">y-axis:
          <select id="ySelect">
            <option value="0">Density</option>
            <option value="1">PLD</option>
            <option value="2">LCD</option>
            <option value="3">VSA</option>
            <option value="4">GSA</option>
            <option value="5">VF</option>
            <option value="6">Uptake (grav.)</option>
            <option value="7" selected>Uptake (vol.)</option>
            <option value="8">Deliverable (grav.)</option>
            <option value="9">Deliverable (vol.)</option>
            <option value="10">QST</option>
          </select></div>
          <div class="w3-col m6 l3">Color axis:
          <select id="colorSelect">
            <option value="0" selected>Density</option>
            <option value="1">PLD</option>
            <option value="2">LCD</option>
            <option value="3">VSA</option>
            <option value="4">GSA</option>
            <option value="5">VF</option>
            <option value="6">Uptake (grav.)</option>
            <option value="7">Uptake (vol.)</option>
            <option value="8">Deliverable (grav.)</option>
            <option value="9">Deliverable (vol.)</option>
            <option value="10">QST</option>
          </select></div>
          <div class="w3-col m6 l3">Bubble size:
          <select id="sizeSelect">
            <option value="0">Density</option>
            <option value="1" selected>PLD</option>
            <option value="2">LCD</option>
            <option value="3">VSA</option>
            <option value="4">GSA</option>
            <option value="5">VF</option>
            <option value="6">Uptake (grav.)</option>
            <option value="7">Uptake (vol.)</option>
            <option value="8">Deliverable (grav.)</option>
            <option value="9">Deliverable (vol.)</option>
            <option value="10">QST</option>
          </select></div>
          </form>
        </div>
    </div>

    <div class="w3-col m2 l2" style="text-align:center">
        <button class="w3-button w3-border">About</button> <br />
        <button class="w3-button w3-border" onclick="document.getElementById('help-modal').style.display='block'">Help...</button>
    </div>
  </div>

  <div id="help-modal" class="w3-modal">
    <div class="w3-modal-content">
      <div class="w3-container">
        <span onclick="document.getElementById('help-modal').style.display='none'"
          class="w3-button w3-display-topright">&times;</span>
        <h3> Help </h3>
        <p> Some help text goes in here. </p>
        <p> <a href="#" onclick="reloadMOFdata()"> Reload MOF data... </a> </p>
      </div>
    </div>
  </div>

  <div id="filter-modal" class="w3-modal">
    <div class="w3-modal-content">
      <div class="w3-container">
        <span onclick="applyFilter();"
          class="w3-button w3-display-topright"><b>APPLY</b></span>
        <h3> Search and Filter </h3>
        <button class="w3-button w3-border" onclick="tableSelectAll();">Select all</button>
        <button class="w3-button w3-border" onclick="selectFromGraph();">Select from graph</button>
        <button class="w3-button w3-border" onclick="tableSelectNone();" style="float: right;">Clear filter</button>
      </div>
      <div class="w3-row">
        <div class="w3-col m8 l9">
          <div id="dashboard"><div id="control1"></div></div>
          <div id="table_div" style="height: 65vh; overflow: auto;"></div>
        </div>
        <div class="w3-col m1 l1">
          <div><br /><br /><br /></div>
          <div>
            <button class="w3-button w3-border" onclick="addToSelection();">>></button><br />
            <button class="w3-button w3-border" onclick="removeFromSelection();"><<</button>
          </div>
        </div>
        <div class="w3-col m3 l2">
          <div><br /></div>
          <div id="filterTable_div" style="height: 65vh; overflow: auto;"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="graph-filter-modal" class="w3-row" style="display:none;">
    <div class="w3-col m4 l5">
      <h3 style="color:#fff; text-align:center">Filtering</h3>
      <p style="color:#fff; text-align:center">Click on points to add them to the filter, then click Apply.<br />
      Remove points using the &times; button.</p>
    </div>
    <div class="w3-col m2 l1" style="background-color: #fff">
      <div id="graph-filterTable_div" style="height: 30vh; overflow: auto;"></div>
    </div>
    <div class="w3-col m2 l1">
      <button class="w3-button w3-border" onclick="removeFromGraphSelection();" style="background: #fff">&times;</button>
    </div>
    <div class="w3-col m4 l5">
      <button class="w3-button w3-border" onclick="applyGraphSelection();" style="background: #fff">Apply</button><br />
    </div>
  </div>

  </body>
</html>
